name: "⚒ Generating Duplicate Report"

on:
  pull_request:
    paths: '**.ir'
    
jobs:
  lint:
    name: "🐛 Looking for possible duplicates"
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - uses: actions/checkout@v3
        with:
          repository: 'darmiel/flipper-scripts'
          path: darmiel/flipper-scripts
      
      - name: Get changed files
        id: changed-files
        uses: tj-actions/changed-files@v35.1.0
        with:
          files: "**/*.ir"
          separator: "\n"
          write_output_files: "true"
          
      - name: Save changed file names to file
        run: echo '${{ steps.changed-files.outputs.all_changed_files }}' > changed_file_list.txt
        
      - name: Show changed file names
        run: |
          cat changed_file_list.txt
          ls -la .github/outputs
          cat .github/outputs/*